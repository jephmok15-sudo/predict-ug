<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Predict UG</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    body{margin:0;background:#000;color:#fff;font-family:'Poppins',sans-serif;}
    header{padding:18px;text-align:center;border-bottom:1px solid #111;background:#000}
    header h1{color:#ff1f1f;margin:0}
    .container{max-width:1080px;margin:24px auto;padding:0 16px}
    .ad{background:#0b0b0b;border:2px dashed #222;color:#9a9a9a;padding:28px;border-radius:10px;text-align:center;margin-bottom:20px}
    .predictions{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}
    .card{background:#0f0f0f;padding:16px;border-radius:10px;border:1px solid #222}
    .card h3{color:#ff3b3b;margin:0 0 8px}
    .meta{color:#bbb;font-size:13px}
    .btn{display:inline-block;background:#ff3b3b;color:#fff;padding:10px 14px;border-radius:8px;text-decoration:none;margin-top:10px}
    footer{padding:20px;text-align:center;color:#888;font-size:13px}
    .note{color:#aaa;font-size:13px}
  </style>
</head>
<body>
  <header><h1>Predict UG</h1></header>

  <div class="container">
    <div style="display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap">
      <div>
        <h2 style="margin:8px 0 4px">Smart Wrestling & Sports Predictions</h2>
        <div class="note">We provide tips & predictions — we do <strong>not</strong> accept bets on this site. Visit our partner platforms to place bets.</div>
      </div>
      <div>
        <!-- Link to admin is hidden or used by you -->
        <a class="btn" href="/secure-admin.html">Admin (owners)</a>
      </div>
    </div>

    <div class="ad" id="top-ad">TOP AD SPACE (paste ad code in admin)</div>

    <section style="margin-top:20px">
      <h3 style="color:#ff3b3b">Latest Predictions</h3>
      <div id="predictions" class="predictions">
        <!-- cards inserted here -->
      </div>
    </section>

    <div class="ad" id="mid-ad">MIDDLE AD SPACE</div>

    <section style="margin-top:22px">
      <h3 style="color:#ff3b3b">Partners & Affiliate</h3>
      <div class="card">
        <p class="note">Click partner links to place bets on licensed platforms. We earn a referral fee (affiliate).</p>
        <a class="btn" href="#" id="partnerLink">Go To Partner</a>
      </div>
    </section>

    <div class="ad" id="bottom-ad">BOTTOM AD SPACE</div>

  </div>

  <footer>Predict UG © 2025 — Tips & Predictions Only. Responsible use advised.</footer>

  <!-- Firebase libs (Realtime DB) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <script>
  // --- your firebase config (from earlier) ---
  const firebaseConfig = {
    apiKey: "AIzaSyBnIeC8g8sx0KxKgoHQNqRlT3u3EVYA_10",
    authDomain: "predict-ug.firebaseapp.com",
    databaseURL: "https://predict-ug-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "predict-ug",
    storageBucket: "predict-ug.firebasestorage.app",
    messagingSenderId: "904307610384",
    appId: "1:904307610384:web:588965a0949648ff89cb95",
    measurementId: "G-4343P0JB6N"
  };
  // init
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const predictionsRoot = db.ref('predictions');

  // render function
  function renderPredictions(list){
    const wrap = document.getElementById('predictions');
    wrap.innerHTML = '';
    if(!list || list.length===0){
      wrap.innerHTML = '<div class="card">No predictions yet. Check back soon.</div>';
      return;
    }
    list.forEach(p=>{
      const el = document.createElement('div');
      el.className = 'card';
      el.innerHTML = `<h3>${escapeHtml(p.game)}</h3>
                      <div class="meta">${escapeHtml(p.tip)}</div>
                      <div class="meta" style="margin-top:8px">Odds: ${escapeHtml(p.odd)} • Posted: ${escapeHtml(p.date||'')}</div>`;
      wrap.appendChild(el);
    });
  }

  // escape helper
  function escapeHtml(s){ return (s||'').replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

  // realtime listener to predictions
  predictionsRoot.on('value', snapshot=>{
    const data = snapshot.val();
    const arr = [];
    for(const k in data || {}){
      const item = data[k];
      arr.push(item);
    }
    // sort by timestamp if present
    arr.sort((a,b)=> (b.ts||0)-(a.ts||0));
    renderPredictions(arr);
  });

  // optional: show affiliate link from settings
  db.ref('settings/affiliate').once('value').then(snap=>{
    const v = snap.val();
    if(v && v.url){
      document.getElementById('partnerLink').href = v.url;
      document.getElementById('partnerLink').innerText = v.name || 'Our Partner';
    }
    if(v && v.topAdHtml){
      document.getElementById('top-ad').innerHTML = v.topAdHtml;
      document.getElementById('mid-ad').innerHTML = v.midAdHtml || document.getElementById('mid-ad').innerHTML;
      document.getElementById('bottom-ad').innerHTML = v.bottomAdHtml || document.getElementById('bottom-ad').innerHTML;
    }
  }).catch(()=>{});
  </script>
</body>
</html>
