<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Predict UG</title>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Arial, sans-serif;}
body{background:#000;color:white;}
header{
  padding:20px;
  background:#000;
  border-bottom:1px solid #222;
  text-align:center;
}
header h1{color:#e50914;letter-spacing:2px;}
header p{color:#aaa;margin-top:5px;}
.container{max-width:1000px;margin:auto;padding:15px;}

.box{
  background:#111;
  padding:15px;
  border-radius:12px;
  margin-bottom:20px;
  box-shadow:0 0 15px rgba(0,0,0,0.7);
}
h2{margin-bottom:10px;color:#e50914;}
input{
  width:100%;
  padding:10px;
  border-radius:8px;
  border:none;
  background:#222;
  color:#fff;
  margin-top:5px;
}
.prediction{border-bottom:1px solid #222;padding:12px 0;}
.prediction:last-child{border-bottom:none;}
.btn{
  display:inline-block;
  padding:10px 15px;
  background:#e50914;
  color:#fff;
  text-decoration:none;
  border-radius:8px;
  margin-top:10px;
  font-weight:bold;
}
.btn:hover{opacity:0.9;}

.ad-item{margin-bottom:15px;}
.ad-item img,.ad-item video{width:100%;border-radius:10px;}

.stats{display:flex;flex-wrap:wrap;gap:10px;}
.stat{
  flex:1;
  min-width:120px;
  background:#000;
  padding:10px;
  border-radius:10px;
  border:1px solid #222;
  text-align:center;
}

footer{
  text-align:center;
  padding:20px;
  color:#777;
  font-size:14px;
  border-top:1px solid #222;
}
</style>
</head>

<body>

<header>
  <h1>PREDICT UG</h1>
  <p>Smart football predictions & tips (No direct betting)</p>
</header>

<div class="container">

  <!-- ADS -->
  <div class="box">
    <h2>Sponsored</h2>
    <div id="adsContainer"><p style="color:#777">Loading ads...</p></div>
  </div>

  <!-- STATS -->
  <div class="box">
    <h2>Platform Stats</h2>
    <div class="stats">
      <div class="stat">
        <h3 id="totalPredictions">0</h3>
        <small>Predictions</small>
      </div>
      <div class="stat">
        <h3 id="totalPoints">0</h3>
        <small>Total Points</small>
      </div>
      <div class="stat">
        <h3>UGX <span id="earnings">0</span></h3>
        <small>Earnings</small>
      </div>
    </div>
  </div>

  <!-- SEARCH -->
  <div class="box">
    <h2>Search Match</h2>
    <input type="text" id="searchInput" placeholder="e.g Arsenal vs Chelsea">
  </div>

  <!-- PREDICTIONS -->
  <div class="box">
    <h2>Latest Predictions</h2>
    <div id="predictionsList"><p style="color:#777">Loading predictions...</p></div>
  </div>

  <!-- SUPPORT -->
  <div class="box">
    <h2>Support / Partner</h2>
    <p>This website provides football predictions only.</p>
    <p>To support or partner with us, contact admin.</p>
  </div>

</div>

<footer>
  Predict UG Â© 2025 <br>
  We provide predictions only. No direct betting or money handling on this site.
</footer>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBnIeC8g8sx0KxKgoHQNqRlT3u3EVYA_10",
  authDomain: "predict-ug.firebaseapp.com",
  databaseURL: "https://predict-ug-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "predict-ug",
  storageBucket: "predict-ug.appspot.com",
  messagingSenderId: "904307610384",
  appId: "1:904307610384:web:588965a0949648ff89cb95"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const predictionsRef = ref(db,"predictions");
const adsRef = ref(db,"ads");
const statsRef = ref(db,"stats");

const adsContainer = document.getElementById("adsContainer");
const predictionsContainer = document.getElementById("predictionsList");
const searchInput = document.getElementById("searchInput");

const totalPredictions = document.getElementById("totalPredictions");
const totalPoints = document.getElementById("totalPoints");
const earnings = document.getElementById("earnings");

let allPredictions = [];

/* ADS */
onValue(adsRef,(snap)=>{
  const data = snap.val();
  adsContainer.innerHTML = "";
  if(!data){
    adsContainer.innerHTML = "<p style='color:#777'>No ads yet</p>";
    return;
  }

  Object.values(data).forEach(ad=>{
    const div = document.createElement("div");
    div.classList.add("ad-item");

    if(ad.type === "image"){
      div.innerHTML = `<a href="${ad.link}" target="_blank"><img src="${ad.content}"></a>`;
    }
    else if(ad.type === "video"){
      div.innerHTML = `<video src="${ad.content}" controls></video>`;
    }
    else{
      div.innerHTML = ad.content;
    }

    adsContainer.appendChild(div);
  });
});

/* STATS */
onValue(statsRef,(snap)=>{
  const data = snap.val();
  if(data){
    totalPoints.textContent = data.totalPoints || 0;
    earnings.textContent = data.earnings || 0;
  }
});

/* LOAD PREDICTIONS */
onValue(predictionsRef,(snap)=>{
  const data = snap.val();
  allPredictions = [];
  predictionsContainer.innerHTML = "";

  if(!data){
    predictionsContainer.innerHTML = "<p style='color:#777'>No predictions yet</p>";
    totalPredictions.textContent = 0;
    return;
  }

  allPredictions = Object.values(data).reverse();
  totalPredictions.textContent = allPredictions.length;

  renderPredictions(allPredictions);
});

function renderPredictions(list){
  predictionsContainer.innerHTML = "";

  list.forEach(item=>{
    const linkButton = item.affiliateLink
      ? `<a class="btn" target="_blank" href="${item.affiliateLink}">Visit Site</a>`
      : "";

    const div = document.createElement("div");
    div.classList.add("prediction");

    div.innerHTML = `
      <h3>${item.match}</h3>
      <p><b>Odds:</b> ${item.odds}</p>
      <p>${item.details}</p>
      ${linkButton}
    `;

    predictionsContainer.appendChild(div);
  });
}

/* SEARCH */
searchInput.addEventListener("input", ()=>{
  const value = searchInput.value.toLowerCase();
  const filtered = allPredictions.filter(item =>
    item.match.toLowerCase().includes(value)
  );
  renderPredictions(filtered);
});

</script>
</body>
</html>