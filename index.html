<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Predict UG</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  background:black;
  color:white;
  font-family:Arial, sans-serif;
  padding:10px;
}

h1{
  text-align:center;
  color:red;
}

.subtitle{
  text-align:center;
  color:#bbb;
  margin-bottom:15px;
}

.card{
  background:#111;
  padding:15px;
  border-radius:12px;
  margin-bottom:20px;
  box-shadow:0 0 10px #000;
}

.red{
  color:red;
}

.statBox{
  display:flex;
  gap:10px;
}

.stat{
  flex:1;
  background:#000;
  padding:10px;
  border-radius:10px;
  text-align:center;
}

#adContainer{
  text-align:center;
}

input{
  width:100%;
  padding:12px;
  border-radius:8px;
  border:none;
  background:#222;
  color:white;
  margin-top:10px;
}

.prediction{
  border-bottom:1px solid #333;
  padding:10px 0;
}
</style>
</head>

<body>

<h1>PREDICT UG</h1>
<div class="subtitle">
Smart football predictions & tips (No direct betting)
</div>

<!-- ADS SECTION -->
<div class="card">
<h2 class="red">Sponsored</h2>
<div id="adContainer">Loading ads...</div>
</div>

<!-- STATS -->
<div class="card">
<h2 class="red">Platform Stats</h2>
<div class="statBox">
  <div class="stat">
    <h3 id="predictionsCount">0</h3>
    Predictions
  </div>
  <div class="stat">
    <h3 id="totalPoints">0</h3>
    Total Points
  </div>
  <div class="stat">
    <h3 id="earnings">UGX 0</h3>
    Earnings
  </div>
</div>
</div>

<!-- SEARCH -->
<div class="card">
<h2 class="red">Search Match</h2>
<input type="text" id="searchInput" placeholder="e.g Arsenal vs Chelsea" onkeyup="searchMatch()">
</div>

<!-- PREDICTIONS -->
<div class="card">
<h2 class="red">Latest Predictions</h2>
<div id="predictionsList">Loading predictions...</div>
</div>

<!-- SUPPORT -->
<div class="card">
<h2 class="red">Support / Partner</h2>
<p>
This website provides football predictions only.<br>
No direct betting is conducted here.<br><br>
To advertise or partner with us, contact the admin.
</p>
</div>

<p style="text-align:center; color:#777;">
Predict UG © 2025 — Uganda
</p>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBnIeC8g8sx0KxKgoHQNqRlT3u3EVYA_10",
  authDomain: "predict-ug.firebaseapp.com",
  databaseURL: "https://predict-ug-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "predict-ug",
  storageBucket: "predict-ug.appspot.com",
  messagingSenderId: "904307610384",
  appId: "1:904307610384:web:588965a0949648ff89cb95"
};
firebase.initializeApp(firebaseConfig);

const db = firebase.database();

let allPredictions = [];

/* LOAD ADS */
db.ref("adsAffiliate/customAd").on("value", snap => {
  let ad = snap.val();
  if(ad){
    document.getElementById("adContainer").innerHTML = ad;
  } else {
    document.getElementById("adContainer").innerHTML = "<small>No ads yet</small>";
  }
});

/* LOAD EARNINGS */
db.ref("stats/earnings").on("value", snap=>{
  document.getElementById("earnings").innerText = "UGX " + (snap.val() || 0);
});

/* LOAD PREDICTIONS */
db.ref("predictions").on("value", snap => {
  let data = snap.val();
  let container = document.getElementById("predictionsList");

  container.innerHTML = "";
  allPredictions = [];

  let totalPoints = 0;

  if(!data){
    container.innerHTML = "<small>No predictions available</small>";
    document.getElementById("predictionsCount").innerText = 0;
    document.getElementById("totalPoints").innerText = 0;
    return;
  }

  allPredictions = Object.values(data).reverse();

  allPredictions.forEach(p => {
    totalPoints += Number(p.points || 0);

    container.innerHTML += `
      <div class="prediction">
        <b>${p.match}</b><br>
        Odds: ${p.odds}<br>
        ${p.details}<br>
        <small>${p.time}</small>
      </div>
    `;
  });

  document.getElementById("predictionsCount").innerText = allPredictions.length;
  document.getElementById("totalPoints").innerText = totalPoints;
});

/* SEARCH FUNCTION */
function searchMatch(){
  let input = document.getElementById("searchInput").value.toLowerCase();
  let container = document.getElementById("predictionsList");
  container.innerHTML = "";

  let filtered = allPredictions.filter(p => 
    p.match.toLowerCase().includes(input)
  );

  if(filtered.length === 0){
    container.innerHTML = "<small>No matching prediction found</small>";
    return;
  }

  filtered.forEach(p=>{
    container.innerHTML += `
      <div class="prediction">
        <b>${p.match}</b><br>
        Odds: ${p.odds}<br>
        ${p.details}<br>
        <small>${p.time}</small>
      </div>
    `;
  });
}
</script>

</body>
</html>